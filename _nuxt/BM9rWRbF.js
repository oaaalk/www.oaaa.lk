import{z as R,b as W,O as P,B as w,h,w as f,C as B,D as j,b1 as M,T as D,bF as I,y as N,b3 as U,r as V,aK as F,c as L,e as m,n as b,E as l,aP as G,d as T,F as H,aN as q,j as X,bG as K,m as O,l as J}from"./DgJrQkXc.js";import{u as Q,f as Y,k as Z,l as C,o as _,q as ee,M as x}from"./COJPa5-9.js";import{_ as te,a as ne,b as oe}from"./CmMPmWZ2.js";function ae(i){const e=new WeakMap,v=Q();function g(n){if(i.mode!=="popLayout")return;const r=n.element.offsetParent,u=r instanceof HTMLElement&&r.offsetWidth||0,o={height:n.element.offsetHeight||0,width:n.element.offsetWidth||0,top:n.element.offsetTop,left:n.element.offsetLeft,right:0};o.right=u-o.width-o.left;const s=i.anchorX==="left"?`left: ${o.left}`:`right: ${o.right}`;n.element.dataset.motionPopId=n.id;const t=document.createElement("style");v.value.nonce&&(t.nonce=v.value.nonce),e.set(n,t),document.head.appendChild(t),t.sheet&&t.sheet.insertRule(`
    [data-motion-pop-id="${n.id}"] {
      position: absolute !important;
      width: ${o.width}px !important;
      height: ${o.height}px !important;
      top: ${o.top}px !important;
      ${s}px !important;
      }
      `)}function p(n){const r=e.get(n);r&&(e.delete(n),Y.render(()=>{document.head.removeChild(r)}))}return{addPopStyle:g,removePopStyle:p,styles:e}}function A(i){return Promise.resolve().then(()=>{i()})}const se=R({name:"AnimatePresence",inheritAttrs:!0,__name:"AnimatePresence",props:{mode:{default:"sync"},initial:{type:Boolean,default:!0},as:{},custom:{},onExitComplete:{},anchorX:{default:"left"}},setup(i){const e=i;Z(e);const{addPopStyle:v,removePopStyle:g,styles:p}=ae(e);function n(t){let a=t;for(;a;){if(C.get(a))return a;a=a.firstElementChild}return null}function r(t){const a=C.get(t);a&&(g(a),a.isVShow=!0,_(t),A(()=>{a.setActive("exit",!1)}))}const u=new Map;W(()=>{u.clear()});function o(t,a){var y;const d=n(t),c=C.get(d);if(!d||!c){a(),u.size===0&&((y=e.onExitComplete)==null||y.call(e));return}u.set(d,!0),_(d),v(c);function S(k){var E,z;if((E=k==null?void 0:k.detail)!=null&&E.isExit){const $=c.visualElement.projection;if(($==null?void 0:$.animationProgress)>0&&!c.isSafeToRemove&&!c.isVShow)return;_(d),u.delete(d),u.size===0&&((z=e.onExitComplete)==null||z.call(e)),p.has(c)?g(c):c.willUpdate("done"),a(),d.isConnected||c.unmount(!0)}}A(()=>{c.setActive("exit",!0),ee.set(d,S),d.addEventListener("motioncomplete",S)})}const s=P(()=>e.mode!=="wait"?{tag:e.as}:{mode:e.mode==="wait"?"out-in":void 0});return(t,a)=>(h(),w(M(t.mode==="wait"?D:I),j({css:!1},s.value,{appear:"",onEnter:r,onLeave:o}),{default:f(()=>[B(t.$slots,"default")]),_:3},16))}}),ie={slots:{base:"rounded-md",overlay:"fixed inset-0 bg-default/75 backdrop-blur-sm will-change-opacity",content:"fixed inset-0 flex items-center justify-center cursor-zoom-out focus:outline-none p-4 sm:p-8"},variants:{zoom:{true:"will-change-transform"},open:{true:""}},compoundVariants:[{zoom:!0,open:!1,class:"cursor-zoom-in"}]},le=["onClick"],de={__name:"ProseImg",props:{src:{type:String,required:!0},alt:{type:String,required:!0},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},class:{type:null,required:!1},zoom:{type:Boolean,required:!1,default:!0},ui:{type:null,required:!1}},setup(i){const e=i,v=N(),[g,p]=U(),n=V(!1),r=P(()=>{var o,s;return q({extend:q(ie),...((s=(o=v.uiPro)==null?void 0:o.prose)==null?void 0:s.img)||{}})({zoom:e.zoom,open:n.value})}),u=P(()=>{var o;if((o=e.src)!=null&&o.startsWith("/")&&!e.src.startsWith("//")){const s=X(K(O().app.baseURL));if(s!=="/"&&!e.src.startsWith(s))return J(s,e.src)}return e.src});return e.zoom&&F(window,"scroll",()=>{n.value=!1}),(o,s)=>(h(),L(H,null,[m(l(g),null,{default:f(()=>{var t;return[(h(),w(M(l(G)),{src:u.value,alt:i.alt,width:i.width,height:i.height,class:b(r.value.base({class:[(t=e.ui)==null?void 0:t.base,e.class]}))},null,8,["src","alt","width","height","class"]))]}),_:1}),i.zoom?(h(),w(l(oe),{key:0,open:n.value,"onUpdate:open":s[0]||(s[0]=t=>n.value=t),modal:!1},{default:f(({close:t})=>[m(l(te),{"as-child":""},{default:f(()=>[m(l(x),{"layout-id":u.value,"as-child":"",transition:{type:"spring",bounce:.2,duration:.4}},{default:f(()=>[m(l(p))]),_:1},8,["layout-id"])]),_:1}),m(l(ne),null,{default:f(()=>[m(l(se),null,{default:f(()=>{var a,y;return[n.value?(h(),w(l(x),{key:0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},class:b(r.value.overlay({class:[(a=e.ui)==null?void 0:a.overlay]}))},null,8,["class"])):T("",!0),n.value?(h(),L("div",{key:1,class:b(r.value.content({class:[(y=e.ui)==null?void 0:y.content]})),onClick:t},[m(l(x),{"as-child":"","layout-id":u.value,transition:{type:"spring",bounce:.2,duration:.4}},{default:f(()=>[m(l(p))]),_:1},8,["layout-id"])],10,le)):T("",!0)]}),_:2},1024)]),_:2},1024)]),_:1},8,["open"])):(h(),w(l(p),{key:1}))],64))}};export{de as default};
